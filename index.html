<!DOCTYPE html>
<html>

<head>
    <title>title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div id="app">
        <button onclick="open_random_post()" class="flat_button">Go!</button>
    </div>
</body>

<script>
    var self = this;
    var vk_url_params = {};

    document.addEventListener('DOMContentLoaded', function () {
        var raw_params = document.location.search.substring(1).split('&');

        raw_params.forEach(function (rawParam) {
            vk_url_params[rawParam.split('=')[0]] = rawParam.split('=')[1];
        });
    });

    function vk_jsonp(method, params, callback) {
        var callbackName = 'jsonp_callback_' + +new Date();
        self[callbackName] = callback;

        params.push('callback=' + callbackName);
        params.push('v=5.62');
        params.push('access_token=' + vk_url_params['access_token']);

        var elem = document.createElement("script");
        elem.src = 'https://api.vk.com/method/' + method + '?' + params.join('&');
        document.head.appendChild(elem);
    }

    function random(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function open_random_post() {
        var params = [
            'owner_id=' + '-' + vk_url_params['group_id']
        ];

        var callback = function (data) {
            open_post(data.response.count);
        };

        vk_jsonp('wall.get', params, callback);
    }

    function open_post(offset) {
        var params = [
            'owner_id=' + '-' + vk_url_params['group_id'],
            'count=1',
            'offset=' + offset
        ];

        var callback = function (data) {
            var post = data.response.items[0];
            window.open('https://vk.com/wall-' + vk_url_params['group_id'] + '_' + post.id, '_blank');
        };

        vk_jsonp('wall.get', params, callback);
    }
</script>

</html>